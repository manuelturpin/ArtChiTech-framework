# SPEC: GitHub Integration

> Synchronisation bidirectionnelle entre ACT et GitHub Issues/PR

## Objectif

Permettre la gestion de projet intÃ©grÃ©e entre l'Ã©tat local ACT (`.act/plan.md`, `progress.md`) et GitHub (Issues, Pull Requests, Labels).

**BÃ©nÃ©fices :**
- VisibilitÃ© du projet sur GitHub pour l'Ã©quipe
- TraÃ§abilitÃ© des phases via Issues
- Historique des dÃ©cisions dans les PR
- Collaboration facilitÃ©e

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   .act/          â”‚         â”‚   GitHub         â”‚
â”‚   â”œâ”€â”€ plan.md    â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚   â”œâ”€â”€ Issues     â”‚
â”‚   â”œâ”€â”€ progress.mdâ”‚         â”‚   â”œâ”€â”€ Labels     â”‚
â”‚   â””â”€â”€ state.md   â”‚         â”‚   â””â”€â”€ PRs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€ Sync â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mapping plan.md â†’ Issues

### Structure de plan.md

```markdown
## Phases

### Phase 1: Discovery âœ…
- [x] Define problem statement
- [x] Identify stakeholders

### Phase 2: Strategy ğŸ”„
- [x] Create roadmap
- [ ] Define milestones

### Phase 3: Design â³
- [ ] Architecture diagrams
- [ ] API specification
```

### Extraction

| Ã‰lÃ©ment plan.md | GitHub Issue |
|-----------------|--------------|
| `### Phase N: Name` | Issue title: `[Phase N] Name` |
| `âœ…` (complete) | Issue closed |
| `ğŸ”„` (in-progress) | Issue open + label `in-progress` |
| `â³` (pending) | Issue open + label `pending` |
| `- [x] task` | Checkbox dans le body (checked) |
| `- [ ] task` | Checkbox dans le body (unchecked) |

### Labels recommandÃ©s

| Label | Color | Description |
|-------|-------|-------------|
| `phase-1` | `#1d76db` | Phase 1: Discovery |
| `phase-2` | `#0e8a16` | Phase 2: Strategy |
| `phase-3` | `#fbca04` | Phase 3: Design |
| `phase-4` | `#d93f0b` | Phase 4: Development |
| `phase-5` | `#5319e7` | Phase 5: Quality |
| `phase-6` | `#006b75` | Phase 6: Launch |
| `phase-7` | `#b60205` | Phase 7: Growth |
| `in-progress` | `#0e8a16` | Currently active |
| `pending` | `#c5def5` | Not yet started |
| `blocked` | `#b60205` | Blocked by issue |
| `act-managed` | `#ededed` | Managed by ACT |

---

## Mapping progress.md â†’ Issue Comments

Chaque entrÃ©e de session dans `progress.md` peut Ãªtre synchronisÃ©e comme commentaire sur l'Issue correspondante.

```markdown
## Session 2026-02-02 14:30

### Completed
- Implemented login endpoint
- Added unit tests (coverage: 87%)

### Notes
- JWT preferred over sessions
```

â†“ Devient commentaire sur Issue `[Phase 4] Development` :

```markdown
## Session Update: 2026-02-02 14:30

**Completed:**
- âœ… Implemented login endpoint
- âœ… Added unit tests (coverage: 87%)

**Notes:**
- JWT preferred over sessions

---
*Synced by ACT Framework*
```

---

## Mapping state.md â†’ Issue Milestones

L'Ã©tat global du projet peut Ãªtre reflÃ©tÃ© via les milestones GitHub.

| state.md | GitHub Milestone |
|----------|------------------|
| Phase actuelle | Milestone actif |
| Progress % | Milestone progress |
| Target date | Milestone due date |

---

## Format des Pull Requests

### Template PR

```markdown
## ğŸ¯ Objective

[Phase N] - Description of what this PR achieves

## ğŸ“‹ Changes

- Change 1
- Change 2

## ğŸ”— Related Issues

Closes #XX (Phase N Issue)

## âœ… Checklist

- [ ] Tests pass
- [ ] Documentation updated
- [ ] Code reviewed

## ğŸ“Š ACT Context

**Phase:** N/7
**Progress:** XX%
**Session:** YYYY-MM-DD HH:MM

---
*Generated by ACT Framework*
```

### Liaison automatique

Les commits avec le format `feat(act): [Phase N.X] Message` sont automatiquement liÃ©s Ã  l'Issue correspondante.

---

## Commandes

### /act:sync-github

```bash
/act:sync-github [--push | --pull] [--dry-run] [--labels]
```

| Option | Description |
|--------|-------------|
| `--push` | Pousse l'Ã©tat local vers GitHub Issues |
| `--pull` | RÃ©cupÃ¨re l'Ã©tat des Issues vers local |
| `--dry-run` | Affiche les changements sans les appliquer |
| `--labels` | CrÃ©e/met Ã  jour les labels automatiquement |
| (aucune) | Mode interactif, affiche le diff |

### Exemples

```bash
# Voir les diffÃ©rences
/act:sync-github

# Pousser l'Ã©tat local
/act:sync-github --push

# Pousser avec crÃ©ation des labels
/act:sync-github --push --labels

# Simuler sans appliquer
/act:sync-github --push --dry-run

# RÃ©cupÃ©rer l'Ã©tat GitHub
/act:sync-github --pull
```

---

## Configuration

Dans `.act/config.yaml` :

```yaml
github:
  enabled: true
  repo: owner/repo  # Auto-detected from git remote if not set
  sync:
    issues: true        # Sync phases as issues
    labels: true        # Create/update labels
    milestones: true    # Sync as milestones
    comments: false     # Sync progress as comments
  prefix: "[ACT]"       # Prefix for managed issues
  labelPrefix: "act-"   # Prefix for labels
```

---

## Workflow recommandÃ©

### 1. Initialisation

```bash
# CrÃ©er les labels et issues initiales
/act:sync-github --push --labels
```

### 2. Pendant le dÃ©veloppement

```bash
# AprÃ¨s chaque phase complÃ©tÃ©e
/act:sync-github --push
```

### 3. Avant une PR

```bash
# GÃ©nÃ©rer la description de PR
/act:handoff --format github-pr
```

### 4. Collaboration

```bash
# RÃ©cupÃ©rer les changements faits sur GitHub
/act:sync-github --pull
```

---

## Gestion des conflits

Si l'Ã©tat local et GitHub divergent :

1. **Mode interactif** : ACT affiche les diffÃ©rences
2. **Choix** : Local wins (`--push --force`) ou Remote wins (`--pull --force`)
3. **Merge** : ACT propose une fusion intelligente

```bash
# Voir les conflits
/act:sync-github

# Forcer l'Ã©tat local
/act:sync-github --push --force

# Forcer l'Ã©tat remote
/act:sync-github --pull --force
```

---

## SÃ©curitÃ©

- **Token GitHub** : Requis pour push (read/write issues)
- **Permissions** : `repo` scope minimum
- **Rate limiting** : ACT respecte les limites API GitHub
- **Audit** : Toutes les syncs sont loggÃ©es dans `progress.md`

### Configuration du token

```bash
# Via variable d'environnement
export GITHUB_TOKEN=ghp_xxxxx

# Ou dans .act/config.yaml (non recommandÃ©)
github:
  token: ghp_xxxxx  # âš ï¸ Attention: ne pas committer!
```

---

## Limitations

- **Sync unidirectionnelle prÃ©fÃ©rÃ©e** : `--push` est plus fiable que `--pull`
- **Commentaires** : Non synchronisÃ©s par dÃ©faut (verbeux)
- **Assignees** : Non gÃ©rÃ©s automatiquement
- **Projects (beta)** : Non supportÃ©s dans v2.5

---

## Ã‰volutions futures

- [ ] Support GitHub Projects (kanban)
- [ ] Sync bidirectionnelle temps rÃ©el (webhooks)
- [ ] IntÃ©gration avec GitHub Actions
- [ ] Support GitLab/Bitbucket
